<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de T√¢ches</title>
    <!-- CSS Modular Import -->
    <link href="./css/variables.css" rel="stylesheet">
    <link href="./css/layout.css" rel="stylesheet">
    <link href="./css/alerts.css" rel="stylesheet">
    <link href="./css/buttons.css" rel="stylesheet">
    <link href="./css/forms.css" rel="stylesheet">
    <link href="./css/filters.css" rel="stylesheet">
    <link href="./css/tasks.css" rel="stylesheet">
    <link href="./css/modal.css" rel="stylesheet">
    <link href="./css/utilities.css" rel="stylesheet">


        <!-- Scripts modules -->
    <script src="./js/config.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/filterManager.js"></script>
    <script src="./js/taskManager.js"></script>
    <script src="./js/subtaskManager.js"></script>
    <script src="./js/commentManager.js"></script>
    <script src="./js/uiManager.js"></script>
    <script src="./js/main.js"></script>
</head>
<body>
    <div class="container">
        <h1>üìù Gestionnaire de T√¢ches</h1>
        
        <div class="api-status" id="apiStatus">
            ‚ö†Ô∏è Chargement de l'API...
        </div>

        <div id="errorMessage"></div>

        <!-- Formulaire d'ajout simple -->
        <div class="quick-add-form">
            <div class="task-form">
                <input 
                    type="text" 
                    id="taskInput" 
                    placeholder="Ajouter une nouvelle t√¢che..."
                    autocomplete="off"
                >
                <button class="btn btn-add" onclick="toggleAdvancedForm()">‚öôÔ∏è Avanc√©</button>
                <button class="btn btn-add" onclick="addTaskQuick()">Ajouter</button>
            </div>
        </div>

        <!-- Formulaire complet -->
        <div id="advancedForm" class="advanced-form" style="display: none;">
            <h3>Ajouter une t√¢che compl√®te</h3>
            <form onsubmit="addTaskAdvanced(event)">
                <div class="form-group">
                    <label for="formTitre">Titre *</label>
                    <input type="text" id="formTitre" required placeholder="Titre de la t√¢che">
                </div>

                <div class="form-group">
                    <label for="formDescription">Description</label>
                    <textarea id="formDescription" placeholder="Description d√©taill√©e..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="formStatut">Statut</label>
                        <select id="formStatut">
                            <option value="√† faire">√Ä faire</option>
                            <option value="en cours">En cours</option>
                            <option value="termin√©">Termin√©</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="formPriorite">Priorit√©</label>
                        <select id="formPriorite">
                            <option value="basse">üü¢ Basse</option>
                            <option value="moyen" selected>üü° Moyen</option>
                            <option value="haute">üî¥ Haute</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="formCategorie">Cat√©gorie</label>
                        <input type="text" id="formCategorie" placeholder="Ex: Travail, Personnel...">
                    </div>

                    <div class="form-group">
                        <label for="formEcheance">Date d'√©ch√©ance</label>
                        <input type="date" id="formEcheance">
                    </div>
                </div>

                <fieldset class="author-section">
                    <legend>Auteur</legend>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="formAuteurNom">Nom</label>
                            <input type="text" id="formAuteurNom" placeholder="Nom">
                        </div>

                        <div class="form-group">
                            <label for="formAuteurPrenom">Pr√©nom</label>
                            <input type="text" id="formAuteurPrenom" placeholder="Pr√©nom">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="formAuteurEmail">Email</label>
                        <input type="email" id="formAuteurEmail" placeholder="email@example.com">
                    </div>
                </fieldset>

                <div class="form-actions">
                    <button type="submit" class="btn btn-add" id="submitBtn">‚úÖ Ajouter la t√¢che</button>
                    <button type="button" class="btn btn-cancel" onclick="cancelForm()">Annuler</button>
                </div>
            </form>
        </div>

        <div id="loading" class="loading" style="display: none;">
            ‚è≥ Chargement des t√¢ches...
        </div>

        <!-- Section de filtrage et recherche -->
        <div class="filter-section">
            <div class="search-box">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="üîç Rechercher une t√¢che..."
                    onkeyup="applyFilters()"
                >
            </div>

            <div class="filters-row">
                <div class="filter-group">
                    <label for="filterStatut">Statut</label>
                    <select id="filterStatut" onchange="applyFilters()">
                        <option value="">Tous</option>
                        <option value="√† faire">√Ä faire</option>
                        <option value="en cours">En cours</option>
                        <option value="termin√©">Termin√©</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="filterPriorite">Priorit√©</label>
                    <select id="filterPriorite" onchange="applyFilters()">
                        <option value="">Tous</option>
                        <option value="haute">üî¥ Haute</option>
                        <option value="moyen">üü° Moyen</option>
                        <option value="basse">üü¢ Basse</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="filterCategorie">Cat√©gorie</label>
                    <input 
                        type="text" 
                        id="filterCategorie" 
                        placeholder="Ex: Travail..."
                        onkeyup="applyFilters()"
                    >
                </div>

                <div class="filter-group">
                    <label for="filterEcheance">√âch√©ance</label>
                    <select id="filterEcheance" onchange="applyFilters()">
                        <option value="">Tous</option>
                        <option value="retard">En retard</option>
                        <option value="aujourdhui">Aujourd'hui</option>
                        <option value="semaine">Cette semaine</option>
                    </select>
                </div>
            </div>

            <div class="sort-section">
                <div class="sort-group">
                    <label for="sortBy">Trier par</label>
                    <select id="sortBy" onchange="applyFilters()">
                        <option value="dateCreation">Date de cr√©ation</option>
                        <option value="echeance">√âch√©ance</option>
                        <option value="priorite">Priorit√©</option>
                        <option value="titre">Titre</option>
                    </select>
                </div>

                <div class="sort-group">
                    <label for="sortOrder">Ordre</label>
                    <select id="sortOrder" onchange="applyFilters()">
                        <option value="desc">D√©croissant</option>
                        <option value="asc">Croissant</option>
                    </select>
                </div>

                <button class="btn btn-reset" onclick="resetFilters()">üîÑ R√©initialiser</button>
            </div>

            <div class="stats-section" id="statsSection"></div>
        </div>

        <ul id="taskList"></ul>
    </div>

    <!-- Modale de d√©tails -->
    <div id="taskModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle"></h2>
                <button class="btn-close" onclick="closeTaskModal()">‚úï</button>
            </div>

            <div class="modal-body">
                <!-- Description -->
                <div class="detail-section">
                    <h3>Description</h3>
                    <p id="modalDescription" class="detail-text"></p>
                </div>

                <!-- Statut et Priorit√© -->
                <div class="detail-row">
                    <div class="detail-section">
                        <h3>Statut</h3>
                        <p id="modalStatut" class="detail-badge"></p>
                    </div>
                    <div class="detail-section">
                        <h3>Priorit√©</h3>
                        <p id="modalPriorite" class="detail-badge"></p>
                    </div>
                </div>

                <!-- Cat√©gorie et √âch√©ance -->
                <div class="detail-row">
                    <div class="detail-section">
                        <h3>Cat√©gorie</h3>
                        <p id="modalCategorie" class="detail-text"></p>
                    </div>
                    <div class="detail-section">
                        <h3>√âch√©ance</h3>
                        <p id="modalEcheance" class="detail-text"></p>
                    </div>
                </div>

                <!-- Auteur -->
                <div class="detail-section">
                    <h3>Auteur</h3>
                    <div id="modalAuteur" class="detail-text"></div>
                </div>

                <!-- Dates de cr√©ation/modification -->
                <div class="detail-row">
                    <div class="detail-section">
                        <h3>Cr√©√©e le</h3>
                        <p id="modalDateCreation" class="detail-text"></p>
                    </div>
                    <div class="detail-section">
                        <h3>Modifi√©e le</h3>
                        <p id="modalDateModification" class="detail-text"></p>
                    </div>
                </div>

                <!-- Sous-t√¢ches -->
                <div class="detail-section" id="sousTaskesSection" style="display: none;">
                    <h3>Sous-t√¢ches</h3>
                    <ul id="modalSousTaches" class="sous-taches-list"></ul>
                    <div class="add-subtask-form" style="margin-top: 12px;">
                        <input type="text" id="newSubtaskInput" placeholder="Ajouter une sous-t√¢che..." style="margin-right: 6px;">
                        <button class="btn btn-small" onclick="addSubtask()">‚ûï</button>
                    </div>
                </div>

                <!-- Commentaires -->
                <div class="detail-section" id="commentairesSection">
                    <h3>Commentaires</h3>
                    <ul id="modalCommentaires" class="comments-list"></ul>
                    <div class="add-comment-form" style="margin-top: 12px;">
                        <textarea id="newCommentInput" placeholder="Ajouter un commentaire..." style="width: 100%; min-height: 60px; margin-bottom: 6px;"></textarea>
                        <button class="btn btn-small" onclick="addComment()">üí¨ Commenter</button>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn btn-edit" onclick="editCurrentTask()">‚úèÔ∏è √âditer</button>
                <button class="btn btn-delete" onclick="deleteCurrentTask()">üóëÔ∏è Supprimer</button>
                <button class="btn btn-cancel" onclick="closeTaskModal()">Fermer</button>
            </div>
        </div>
    </div>


</body>
</html>